<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Glowing Orb</title>
    <style>
        /* Basic styles to make the canvas fill the screen */
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #000;
            height: 100%;
            width: 100%;
        }
        /* Style for the canvas element */
        canvas {
            display: block;
            cursor: none; /* Hide the default cursor */
        }
    </style>
</head>
<body>
    <canvas id="interactiveCanvas"></canvas>

    <script>
        // --- Canvas and Context Setup ---
        const canvas = document.getElementById('interactiveCanvas');
        const ctx = canvas.getContext('2d');

        // --- State Variables ---
        // An object to hold the pointer's coordinates, initialized to null
        const pointer = {
            x: null,
            y: null,
        };

        // A flag to track if the user is actively touching the screen
        let isTouching = false;

        // --- Orb Configuration ---
        const orbConfig = {
            radius: 30, // The outer radius of the glow
            gradientInnerRadius: 5, // The radius of the bright core
            colorStops: {
                inner: 'rgba(100, 180, 255, 0.7)', // Dimmer blue core
                middle: 'rgba(40, 120, 220, 0.4)', // Dimmer medium blue glow
                outer: 'rgba(0, 50, 150, 0)'      // Transparent outer edge
            }
        };

        // --- Functions ---

        /**
         * Sets the canvas dimensions to fill the browser window.
         * This function is called on load and on window resize.
         */
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        /**
         * Updates the pointer's position from a mouse or touch event.
         * @param {MouseEvent | TouchEvent} event - The browser event.
         */
        function updatePointerPosition(event) {
            // Use the first touch point if it's a touch event
            if (event.touches && event.touches.length > 0) {
                pointer.x = event.touches[0].clientX;
                pointer.y = event.touches[0].clientY;
            } else { // Otherwise, use the mouse event's coordinates
                pointer.x = event.clientX;
                pointer.y = event.clientY;
            }
        }

        /**
         * The main animation loop, called on every frame.
         */
        function animate() {
            // Create a trailing effect by drawing a semi-transparent black rectangle
            // over the whole canvas each frame. The lower the alpha, the longer the trail.
            ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw the orb only if the pointer has a position (is on screen)
            if (pointer.x !== null) {
                // Create a radial gradient for the glowing effect
                const gradient = ctx.createRadialGradient(
                    pointer.x,
                    pointer.y,
                    orbConfig.gradientInnerRadius,
                    pointer.x,
                    pointer.y,
                    orbConfig.radius
                );

                // Add the color stops to the gradient
                gradient.addColorStop(0, orbConfig.colorStops.inner);
                gradient.addColorStop(0.5, orbConfig.colorStops.middle);
                gradient.addColorStop(1, orbConfig.colorStops.outer);

                // Draw the orb
                ctx.beginPath();
                ctx.arc(pointer.x, pointer.y, orbConfig.radius, 0, Math.PI * 2);
                ctx.fillStyle = gradient;
                ctx.fill();
            }

            // Request the next animation frame to create a smooth loop
            requestAnimationFrame(animate);
        }

        // --- Event Listeners ---

        // Set initial canvas size
        window.addEventListener('load', resizeCanvas);
        // Adjust canvas size if the window is resized
        window.addEventListener('resize', resizeCanvas);

        // --- Mouse Events ---
        // Update pointer on mouse move to show the orb. This makes it work without a click.
        canvas.addEventListener('mousemove', (event) => {
            updatePointerPosition(event);
        });

        // Hide the orb when the mouse leaves the canvas
        canvas.addEventListener('mouseleave', () => {
            pointer.x = null;
            pointer.y = null;
        });

        // --- Touch Events ---
        // Show the orb and start tracking on touch start
        canvas.addEventListener('touchstart', (event) => {
            event.preventDefault(); // Prevent mouse event emulation and other defaults
            isTouching = true;
            updatePointerPosition(event);
        }, { passive: false });

        // Move the orb on touch drag
        canvas.addEventListener('touchmove', (event) => {
            event.preventDefault(); // Prevent scrolling
            if (isTouching) {
                updatePointerPosition(event);
            }
        }, { passive: false });

        // Hide the orb on touch end
        canvas.addEventListener('touchend', () => {
            isTouching = false;
            pointer.x = null;
            pointer.y = null;
        });

        // --- Start the Animation ---
        animate();
    </script>
</body>
</html>
